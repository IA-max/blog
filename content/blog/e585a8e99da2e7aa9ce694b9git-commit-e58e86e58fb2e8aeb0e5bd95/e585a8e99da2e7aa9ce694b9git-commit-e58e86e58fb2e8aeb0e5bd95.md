---
title: '全面窜改git commit 历史记录'
date: '2019-12-10T00:54:06+08:00'
status: private
permalink: /%e5%85%a8%e9%9d%a2%e7%aa%9c%e6%94%b9git-commit-%e5%8e%86%e5%8f%b2%e8%ae%b0%e5%bd%95
author: admin
excerpt: ''
type: post
id: 3145
category:
    - 未分类
tag: []
post_format: []
---
<span>最近遇到一个问题：「GitHub 上的commit 记录可以证明一定是某人commit 的吗？」。</span>  
<span>这个问题的答案是：「NO」。</span>  
<span>git commit 不似区块链有能力做出无法伪造的记录，透过不同的方式，我们可以全面的窜改git commit 的历史记录，不论是作者、上传者或是时间都有办法可以修改，以下将一一介绍如何操作。</span>

<span>0.作业前</span>
------------------

<span>首先先在本机建立一个空的git repo，接着随意写入空的档案：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa2e413975869"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa2e413975869-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa2e413975869-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa2e413975869-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa2e413975869-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa2e413975869-5">5</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa2e413975869-1"><span class="crayon-sy">$</span> <span class="crayon-e">mkdir </span><span class="crayon-i">git</span>–<span class="crayon-i">test</span></div><div class="crayon-line" id="crayon-5dee19bbeaa2e413975869-2"><span class="crayon-sy">$</span> <span class="crayon-e">cd </span><span class="crayon-i">git</span>–<span class="crayon-i">test</span></div><div class="crayon-line" id="crayon-5dee19bbeaa2e413975869-3"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">init</span></div><div class="crayon-line" id="crayon-5dee19bbeaa2e413975869-4"><span class="crayon-sy">$</span> <span class="crayon-e">touch </span><span class="crayon-i">README</span><span class="crayon-sy">.</span><span class="crayon-i">md</span></div><div class="crayon-line" id="crayon-5dee19bbeaa2e413975869-5"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">add </span><span class="crayon-i">README</span><span class="crayon-sy">.</span><span class="crayon-i">md</span></div></div></td></tr></tbody></table>

</div></div><span>1. 基本Git 设定– 设定识别资料</span>
--------------------------------

<span>根据git </span>[<span>官方的资料</span>](https://git-scm.com/book/zh-tw/v1/%E9%96%8B%E5%A7%8B-%E5%88%9D%E6%AC%A1%E8%A8%AD%E5%AE%9AGit#%E8%A8%AD%E5%AE%9A%E8%AD%98%E5%88%A5%E8%B3%87%E6%96%99)<span>，第一次使用Git必须要设定识别资料，而且识别资料会影响到提交的结果：「每次Git提交会使用这些资讯，而且提交后不能再被修改」</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa4b925528144"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa4b925528144-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4b925528144-2">2</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa4b925528144-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">config</span> —<span class="crayon-m">global</span> <span class="crayon-i">user</span><span class="crayon-sy">.</span><span class="crayon-i">name</span> <span class="crayon-s">“John Doe”</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4b925528144-2"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">config</span> —<span class="crayon-m">global</span> <span class="crayon-i">user</span><span class="crayon-sy">.</span><span class="crayon-e">email </span><span class="crayon-i">johndoe</span><span class="crayon-sy">@</span><span class="crayon-i">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span></div></div></td></tr></tbody></table>

</div></div>2. 基本 Git 操作
------------

<span>透过</span>`git commit`<span>，我们可以提交修改：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa4d439248707"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa4d439248707-1">1</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa4d439248707-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">commit</span> –<span class="crayon-i">m</span> <span class="crayon-s">“Init repo”</span></div></div></td></tr></tbody></table>

</div></div><span>接着使用</span>`git log`<span>，我们可以观察到刚刚提交的第一个修改：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa4e147167185"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4e147167185-7">7</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">log</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-2"><span class="crayon-e">commit </span><span class="crayon-e">f7ff60f96dea61763eb86f575a03890cb1cd49fc</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-3"><span class="crayon-i">Author</span><span class="crayon-sy">:</span> <span class="crayon-e">John </span><span class="crayon-i">Doe</span> <span class="crayon-h">&lt;</span><span class="crayon-i">johndoe</span><span class="crayon-sy">@</span><span class="crayon-i">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span><span class="crayon-h">&gt;</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-4"><span class="crayon-i">Date</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-e">Wed </span><span class="crayon-i">May</span> <span class="crayon-cn">31</span> <span class="crayon-cn">22</span><span class="crayon-sy">:</span><span class="crayon-cn">56</span><span class="crayon-sy">:</span><span class="crayon-cn">11</span> <span class="crayon-cn">2017</span> +<span class="crayon-cn">0800</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-5"></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-6"><span class="crayon-h"> </span><span class="crayon-e">Init </span><span class="crayon-e">repo</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4e147167185-7"><span class="crayon-sy">(</span><span class="crayon-st">END</span><span class="crayon-sy">)</span></div></div></td></tr></tbody></table>

</div></div><span>3. 上传至GitHub</span>
-------------------------

<span>我们接着将这个repo 上传到GitHub 上面：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa4f228454216"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa4f228454216-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa4f228454216-2">2</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa4f228454216-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">remote </span><span class="crayon-e">add </span><span class="crayon-e">origin </span><span class="crayon-i">https</span><span class="crayon-sy">:</span><span class="crayon-c">//github.com/mlouielu/git-test.git</span></div><div class="crayon-line" id="crayon-5dee19bbeaa4f228454216-2"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">push</span> –<span class="crayon-i">u</span> <span class="crayon-e">origin </span><span class="crayon-i">master</span></div></div></td></tr></tbody></table>

</div></div><span>观察一下GitHub 上面的commit 记录：</span>

<span>4. 小结</span>
------------------

<span>我们可以用这样的方式来伪造任何人的commit 记录。可是这样还不满足。</span>

5. Git commit 修改之 1 – git commit –amend
---------------------------------------

<span>如果我们想要修改已经commit的commit message，可以透过</span>`--amend`<span> 选项来修改。必须要注意的是，透过这样的方式修改后git commit hash会变得与原本不相符：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa50447081192"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-7">7</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-8">8</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-9">9</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-10">10</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-11">11</div><div class="crayon-num" data-line="crayon-5dee19bbeaa50447081192-12">12</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">commit</span> —<span class="crayon-i">amend</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-2"><span class="crayon-sy">\[</span><span class="crayon-i">master</span> <span class="crayon-cn">55c782f</span><span class="crayon-sy">\]</span> <span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-e">message</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-3"><span class="crayon-i">Date</span><span class="crayon-sy">:</span> <span class="crayon-e">Wed </span><span class="crayon-i">May</span> <span class="crayon-cn">31</span> <span class="crayon-cn">22</span><span class="crayon-sy">:</span><span class="crayon-cn">56</span><span class="crayon-sy">:</span><span class="crayon-cn">11</span> <span class="crayon-cn">2017</span> +<span class="crayon-cn">0800</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-4"><span class="crayon-cn">1</span> <span class="crayon-e">file </span><span class="crayon-i">changed</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span> <span class="crayon-e">insertions</span><span class="crayon-sy">(</span>+<span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span> <span class="crayon-e">deletions</span><span class="crayon-sy">(</span>–<span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-5"><span class="crayon-e">create </span><span class="crayon-i">mode</span> <span class="crayon-cn">100644</span> <span class="crayon-i">README</span><span class="crayon-sy">.</span><span class="crayon-i">md</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-6"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">log</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-7"><span class="crayon-i">commit</span> <span class="crayon-cn">55c782f27309a86763ad7db87e0e7646657584a5</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-8"><span class="crayon-i">Author</span><span class="crayon-sy">:</span> <span class="crayon-e">John </span><span class="crayon-i">Doe</span> <span class="crayon-h">&lt;</span><span class="crayon-i">johndoe</span><span class="crayon-sy">@</span><span class="crayon-i">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span><span class="crayon-h">&gt;</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-9"><span class="crayon-i">Date</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-e">Wed </span><span class="crayon-i">May</span> <span class="crayon-cn">31</span> <span class="crayon-cn">22</span><span class="crayon-sy">:</span><span class="crayon-cn">56</span><span class="crayon-sy">:</span><span class="crayon-cn">11</span> <span class="crayon-cn">2017</span> +<span class="crayon-cn">0800</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-10"></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-11"><span class="crayon-h"> </span><span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-e">message</span></div><div class="crayon-line" id="crayon-5dee19bbeaa50447081192-12"><span class="crayon-sy">(</span><span class="crayon-st">END</span><span class="crayon-sy">)</span></div></div></td></tr></tbody></table>

</div></div><span>对比前面的commit hash 就能看到不同。要上传到GitHub 的话会需要force push：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate crayon-wrapped" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa51249867012"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button crayon-pressed" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-7">7</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-8">8</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-9">9</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-10">10</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-11">11</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-12">12</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-13">13</div><div class="crayon-num" data-line="crayon-5dee19bbeaa51249867012-14">14</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">push</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-2"><span class="crayon-st">To</span> <span class="crayon-i">https</span><span class="crayon-sy">:</span><span class="crayon-c">//github.com/mlouielu/git-test.git</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-3"><span class="crayon-sy">!</span> <span class="crayon-sy">\[</span><span class="crayon-i">rejected</span><span class="crayon-sy">\]</span><span class="crayon-h"> </span><span class="crayon-i">master</span> –<span class="crayon-h">&gt;</span> <span class="crayon-e">master</span> <span class="crayon-sy">(</span><span class="crayon-i">non</span>–<span class="crayon-i">fast</span>–<span class="crayon-i">forward</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-4"><span class="crayon-i">error</span><span class="crayon-sy">:</span> <span class="crayon-e">failed </span><span class="crayon-st">to</span> <span class="crayon-e">push </span><span class="crayon-e">some </span><span class="crayon-e">refs </span><span class="crayon-st">to</span> <span class="crayon-s">‘https://github.com/mlouielu/git-test.git’</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-5"><span class="crayon-i">hint</span><span class="crayon-sy">:</span> <span class="crayon-e">Updates </span><span class="crayon-e">were </span><span class="crayon-e">rejected </span><span class="crayon-e">because </span><span class="crayon-e">the </span><span class="crayon-e">tip </span><span class="crayon-e">of </span><span class="crayon-e">your </span><span class="crayon-e">current </span><span class="crayon-e">branch </span><span class="crayon-st">is</span> <span class="crayon-e">behind</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-6"><span class="crayon-i">hint</span><span class="crayon-sy">:</span> <span class="crayon-e">its </span><span class="crayon-e">remote </span><span class="crayon-i">counterpart</span><span class="crayon-sy">.</span> <span class="crayon-e">Integrate </span><span class="crayon-e">the </span><span class="crayon-e">remote </span><span class="crayon-e">changes</span> <span class="crayon-sy">(</span><span class="crayon-i">e</span><span class="crayon-sy">.</span><span class="crayon-i">g</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-7"><span class="crayon-i">hint</span><span class="crayon-sy">:</span> <span class="crayon-s">‘git pull …’</span><span class="crayon-sy">)</span> <span class="crayon-e">before </span><span class="crayon-e">pushing </span><span class="crayon-i">again</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-8"><span class="crayon-i">hint</span><span class="crayon-sy">:</span> <span class="crayon-e">See </span><span class="crayon-i">the</span> <span class="crayon-s">‘Note about fast-forwards’</span> <span class="crayon-st">in</span> <span class="crayon-s">‘git push –help’</span> <span class="crayon-st">for</span> <span class="crayon-i">details</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-9"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">push</span> —<span class="crayon-e">force</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-10"><span class="crayon-e">Counting </span><span class="crayon-i">objects</span><span class="crayon-sy">:</span> <span class="crayon-cn">3</span><span class="crayon-sy">,</span> <span class="crayon-i">done</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-11"><span class="crayon-e">Writing </span><span class="crayon-i">objects</span><span class="crayon-sy">:</span> <span class="crayon-cn">100</span><span class="crayon-sy">%</span> <span class="crayon-sy">(</span><span class="crayon-cn">3</span>/<span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-cn">224</span> <span class="crayon-i">bytes</span> <span class="crayon-sy">|</span> <span class="crayon-cn">0</span> <span class="crayon-i">bytes</span>/<span class="crayon-i">s</span><span class="crayon-sy">,</span> <span class="crayon-i">done</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-12"><span class="crayon-i">Total</span> <span class="crayon-cn">3</span> <span class="crayon-sy">(</span><span class="crayon-i">delta</span> <span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-i">reused</span> <span class="crayon-cn">0</span> <span class="crayon-sy">(</span><span class="crayon-i">delta</span> <span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-13"><span class="crayon-st">To</span> <span class="crayon-i">https</span><span class="crayon-sy">:</span><span class="crayon-c">//github.com/mlouielu/git-test.git</span></div><div class="crayon-line" id="crayon-5dee19bbeaa51249867012-14">+<span class="crayon-i">f7ff60f</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-cn">55c782f</span> <span class="crayon-i">master</span> –<span class="crayon-h">&gt;</span> <span class="crayon-e">master</span> <span class="crayon-sy">(</span><span class="crayon-e">forced </span><span class="crayon-i">update</span><span class="crayon-sy">)</span></div></div></td></tr></tbody></table>

</div></div>Refresh 一下 GitHub：  
   
<span>恩，讯息理所当然的变更了。</span>

6. Git commit 修改之 2 – git commit –author –date
----------------------------------------------

<span>只修改commit message 一点都不好玩，接着我想要把commit 作者还有时间给换掉：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa56941544009"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-7">7</div><div class="crayon-num" data-line="crayon-5dee19bbeaa56941544009-8">8</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">commit</span> —<span class="crayon-i">amend</span> —<span class="crayon-i">author</span>=<span class="crayon-s">“Guido van Rossum &lt;guido@python.org&gt;”</span> —<span class="crayon-i">date</span>=<span class="crayon-s">“Wed Feb 16 14:00 2011 +0100”</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-2"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">log</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-3"><span class="crayon-i">commit</span> <span class="crayon-cn">8dcabc0a2598b4cc8a8f54e8ff12463fdded21e2</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-4"><span class="crayon-i">Author</span><span class="crayon-sy">:</span> <span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-5"><span class="crayon-i">Date</span><span class="crayon-sy">:</span><span class="crayon-h"> </span><span class="crayon-e">Wed </span><span class="crayon-i">Feb</span> <span class="crayon-cn">16</span> <span class="crayon-cn">14</span><span class="crayon-sy">:</span><span class="crayon-cn">00</span><span class="crayon-sy">:</span><span class="crayon-cn">00</span> <span class="crayon-cn">2011</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-6"></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-7"><span class="crayon-h"> </span><span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-e">message</span></div><div class="crayon-line" id="crayon-5dee19bbeaa56941544009-8"><span class="crayon-sy">(</span><span class="crayon-st">END</span><span class="crayon-sy">)</span></div></div></td></tr></tbody></table>

</div></div>`--date`<span> 的格式支援三种：Git internal format、RFC 2822、ISO 8601，更多资讯请看：</span>[<span>Git date formats</span>](https://git-scm.com/docs/git-commit#_date_formats)<span>。</span>  
<span>把这个修改成由Guido van Rossum 在2011 年的时候commit 的样子。推上去后查看GitHub commit 记录：</span>  
   
   
<span>有两点不太好。第一在GitHub commit log的页面上变成了</span>**<span>gvanrossum commited with John Doe on Feb 16 2011</span>**<span>，我希望变成是Guido上传的，而不是commited with John Doe。第二，repo首页的地方README.md的修改时间却显示为3 minutes ago ……？应该要是6 years ago啊。</span>

7. 看看完整的 Git informations – git cat-file
----------------------------------------

<span>原来</span>`git log`<span> 并不是完整的资讯，完整资讯要使用</span>`git cat-file`<span> 才会显示出来：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa5a306049370"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5a306049370-6">6</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">cat</span>–<span class="crayon-i">file</span> –<span class="crayon-i">p</span> <span class="crayon-e">HEAD</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-2"><span class="crayon-e">tree </span><span class="crayon-e">f93e3a1a1525fb5b91020da86e44810c87a2d7bc</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-3"><span class="crayon-e">author </span><span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1297861200</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-4"><span class="crayon-e">committer </span><span class="crayon-e">John </span><span class="crayon-i">Doe</span> <span class="crayon-h">&lt;</span><span class="crayon-i">johndoe</span><span class="crayon-sy">@</span><span class="crayon-i">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1496243512</span> +<span class="crayon-cn">0800</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-5"></div><div class="crayon-line" id="crayon-5dee19bbeaa5a306049370-6"><span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-i">message</span></div></div></td></tr></tbody></table>

</div></div><span>Author 跟Committer 是不同的，所以GitHub 才会显示为committed with John Doe。</span>

8. Git commit 修改之 3 – committer
-------------------------------

<span>改committer很简单，用</span>`git config`<span> 把user.name修改就可以了：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa5b380509112"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-7">7</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-8">8</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5b380509112-9">9</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-1"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">config </span><span class="crayon-i">user</span><span class="crayon-sy">.</span><span class="crayon-i">name</span> <span class="crayon-s">“Guido van Rossum”</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-2"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-e">config </span><span class="crayon-i">user</span><span class="crayon-sy">.</span><span class="crayon-i">email</span> <span class="crayon-s">“guido@python.org”</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-3"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">commit</span> —<span class="crayon-i">amend</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-4"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">cat</span>–<span class="crayon-i">file</span> –<span class="crayon-i">p</span> <span class="crayon-e">HEAD</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-5"><span class="crayon-e">tree </span><span class="crayon-e">f93e3a1a1525fb5b91020da86e44810c87a2d7bc</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-6"><span class="crayon-e">author </span><span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1297861200</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-7"><span class="crayon-e">committer </span><span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1496244450</span> +<span class="crayon-cn">0800</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-8"></div><div class="crayon-line" id="crayon-5dee19bbeaa5b380509112-9"><span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-i">message</span></div></div></td></tr></tbody></table>

</div></div>9. Git commit 修改之 4 – committer date
------------------------------------

<span>剩下Git committer date需要修改，修改不能使用</span>`--date`<span> 来改，这样只会修改到Author的日期。必须要透过environment variable </span>`GIT_COMMITTER_DATE`<span> 来做修正：</span>

<div class="crayon-syntax crayon-theme-ahhhh-this crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-always" id="crayon-5dee19bbeaa5d928599654"><div class="crayon-toolbar" data-settings=" show"><div class="crayon-tools"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-plain-wrap"></div><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-1">1</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-2">2</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-3">3</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-4">4</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-5">5</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-6">6</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-7">7</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-8">8</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-9">9</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-10">10</div><div class="crayon-num" data-line="crayon-5dee19bbeaa5d928599654-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-1"><span class="crayon-sy">$</span> <span class="crayon-i">GIT\_COMMITTER\_DATE</span>=<span class="crayon-s">“Wed Feb 16 14:00 2011 +0100”</span> <span class="crayon-e">git </span><span class="crayon-i">commit</span> —<span class="crayon-i">amend</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-2"><span class="crayon-sy">\[</span><span class="crayon-e">master </span><span class="crayon-i">f3b5eae</span><span class="crayon-sy">\]</span> <span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-e">message</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-3"><span class="crayon-i">Date</span><span class="crayon-sy">:</span> <span class="crayon-e">Wed </span><span class="crayon-i">Feb</span> <span class="crayon-cn">16</span> <span class="crayon-cn">14</span><span class="crayon-sy">:</span><span class="crayon-cn">00</span><span class="crayon-sy">:</span><span class="crayon-cn">00</span> <span class="crayon-cn">2011</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-4"><span class="crayon-cn">1</span> <span class="crayon-e">file </span><span class="crayon-i">changed</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span> <span class="crayon-e">insertions</span><span class="crayon-sy">(</span>+<span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span> <span class="crayon-e">deletions</span><span class="crayon-sy">(</span>–<span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-5"><span class="crayon-e">create </span><span class="crayon-i">mode</span> <span class="crayon-cn">100644</span> <span class="crayon-i">README</span><span class="crayon-sy">.</span><span class="crayon-i">md</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-6"><span class="crayon-sy">$</span> <span class="crayon-e">git </span><span class="crayon-i">cat</span>–<span class="crayon-i">file</span> –<span class="crayon-i">p</span> <span class="crayon-e">HEAD</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-7"><span class="crayon-e">tree </span><span class="crayon-e">f93e3a1a1525fb5b91020da86e44810c87a2d7bc</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-8"><span class="crayon-e">author </span><span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1297861200</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-9"><span class="crayon-e">committer </span><span class="crayon-e">Guido </span><span class="crayon-e">van </span><span class="crayon-i">Rossum</span> <span class="crayon-h">&lt;</span><span class="crayon-i">guido</span><span class="crayon-sy">@</span><span class="crayon-i">python</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-h">&gt;</span> <span class="crayon-cn">1297861200</span> +<span class="crayon-cn">0100</span></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-10"></div><div class="crayon-line" id="crayon-5dee19bbeaa5d928599654-11"><span class="crayon-e">Amend </span><span class="crayon-e">the </span><span class="crayon-e">commit </span><span class="crayon-i">message</span></div></div></td></tr></tbody></table>

</div></div>`GIT_COMMITTER_DATE`<span> 一样可以接受三种格式。</span>  
<span>我们把这个结果上传到GitHub 上面看看：</span>  
   
<span>恩，commit log显示</span>**<span>gvanrossum committed on 16 Feb 2011</span>**<span>，而repo首页README.md的commit时间显示为6 years ago。</span>

<span>10. 总结</span>
-------------------

<span>至此，我们学会了如何从头到脚修改一个commit log，可以将commit 修改成其他人的资讯了。</span>  
<span>至于有没有办法让git commit变得可信呢？其实是有的，请参考</span>[<span>Git Pro: Signing Your Work</span>](https://git-scm.com/book/en/v2/Git-Tools-Signing-Your-Work)<span>，里面有提到如何使用GPG来签署Git commit，非常值得一读。至于被GPG签署过的commit在法律上有没有效力能够代表一个自然人的所作所为(GPG key对应到自然人)，这我就不知道了。</span>