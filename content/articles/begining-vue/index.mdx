---
title: "Vue å…¥é—¨"
date: "2019-11-24"
featured: false
category: "js"
excerpt: "ue ä¸æ”¯æŒ IE8 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œå› ä¸º Vue ä½¿ç”¨äº† IE8 æ— æ³•æ¨¡æ‹Ÿçš„ ECMAScript 5 ç‰¹æ€§"
tag: ["js"]
status: "publish"
type: "post"
cover: "./cover-v.png"
---

### å®‰è£…
---

#### å¼•å…¥

ç›´æ¥ä¸‹è½½å¹¶ç”¨ `<script>` æ ‡ç­¾å¼•å…¥ï¼Œ`Vue` ä¼šè¢«æ³¨å†Œä¸ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚

##### å¼€å‘:

```markup
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
```

##### ç”Ÿäº§ç¯å¢ƒ
æ¨èé“¾æ¥åˆ°ä¸€ä¸ªæ˜ç¡®çš„ç‰ˆæœ¬å·å’Œæ„å»ºæ–‡ä»¶
```markup
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
```
Vue æ„å»ºå¤§å‹åº”ç”¨æ—¶æ¨èä½¿ç”¨ NPM å®‰è£…  
```bash
npm install vue
```

##### [å®˜æ–¹ CLI](https://github.com/vuejs/vue-cli)

å•é¡µé¢åº”ç”¨ (SPA) å¿«é€Ÿæ­å»ºç¹æ‚çš„è„šæ‰‹æ¶.  
åªéœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´å°±å¯ä»¥è¿è¡Œèµ·æ¥å¹¶å¸¦æœ‰çƒ­é‡è½½ã€ä¿å­˜æ—¶ lint æ ¡éªŒï¼Œä»¥åŠç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„æ„å»ºç‰ˆæœ¬.

##### å¼€å‘ç¯å¢ƒ vs. ç”Ÿäº§ç¯å¢ƒæ¨¡å¼

webpack 4+ ä¸­ï¼Œå¯ä½¿ç”¨ mode é€‰é¡¹

```js
module.exports = {
  mode: 'production'
}
```

##### å…¼å®¹æ€§

Vue ä¸æ”¯æŒ IE8 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œå› ä¸º Vue ä½¿ç”¨äº† IE8 æ— æ³•æ¨¡æ‹Ÿçš„ ECMAScript 5 ç‰¹æ€§ã€‚

*å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º data é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter/setterã€‚Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚*

Internet Explorer 8 å®ç°äº† [Object.defineProperty()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty) æ–¹æ³•ï¼Œä½† åªèƒ½åœ¨ DOM å¯¹è±¡ä¸Šä½¿ç”¨ã€‚ éœ€è¦æ³¨æ„çš„ä¸€äº›äº‹æƒ…ï¼š

- å°è¯•åœ¨åŸç”Ÿå¯¹è±¡ä¸Šä½¿ç”¨ Object.defineProperty()ä¼šæŠ¥é”™ã€‚
- å±æ€§ç‰¹æ€§å¿…é¡»è®¾ç½®ä¸€äº›ç‰¹å®šçš„å€¼ã€‚å¯¹äºæ•°æ®å±æ€§æè¿°ç¬¦ï¼Œconfigurable, enumerable å’Œ writable ç‰¹æ€§å¿…é¡»å…¨éƒ¨è®¾ç½®ä¸º trueï¼›å¯¹äºè®¿é—®å™¨å±æ€§æè¿°ç¬¦ï¼Œconfigurable å¿…é¡»è®¾ç½®ä¸º trueï¼Œenumerable å¿…é¡»è®¾ç½®ä¸º falseã€‚(?) ä»»ä½•è¯•å›¾æä¾›å…¶ä»–å€¼(?)å°†å¯¼è‡´ä¸€ä¸ªé”™è¯¯æŠ›å‡ºã€‚
- é‡æ–°é…ç½®ä¸€ä¸ªå±æ€§é¦–å…ˆéœ€è¦åˆ é™¤è¯¥å±æ€§ã€‚å¦‚æœå±æ€§æ²¡æœ‰åˆ é™¤ï¼Œå°±å¦‚åŒé‡æ–°é…ç½®å‰çš„å°è¯•ã€‚

#### æ’å€¼

##### å£°æ˜å¼æ¸²æŸ“

```js
<div id="app">
  {{ message }}
</div>
var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!'
  }
})
```

```bash
 Hello Vue!
```

##### æŒ‡ä»¤ v-once 

æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œæ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°

```html
<span v-once>è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}</span>
```

##### æ¸²æŸ“åŸå§‹ HTML

åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œè€Œé HTML ä»£ç ã€‚  
ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨ v-html æŒ‡ä»¤ï¼š

```html
<span v-html="rawHtml"></span>
```

##### ç»‘å®š HTML å±æ€§

```html
<div v-bind:id="dynamicId"></div>
```

##### å¸ƒå°”ç‰¹æ€§

å¦‚æœ isButtonDisabled çš„å€¼æ˜¯ nullã€undefined æˆ– falseï¼Œåˆ™ disabled ç‰¹æ€§ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„ å…ƒç´ ä¸­

```html
<button v-bind:disabled="isButtonDisabled">Button</button>
```

##### JS è¡¨è¾¾å¼

é™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«**å•ä¸ªè¡¨è¾¾å¼**

```html
{{ number + 1 }}
{{ ok ? 'YES' : 'NO' }}
{{ message.split('').reverse().join('') }}
<div v-bind:id="'list-' + id"></div>
```

ä»¥ä¸‹ä¸ç”Ÿæ•ˆ

```html
<!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ -->
{{ var a = 1 }}
<!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ -->
{{ if (ok) { return message } }}
```

#### æŒ‡ä»¤

æŒ‡ä»¤ç‰¹æ€§çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼ (v-for æ˜¯ä¾‹å¤–æƒ…å†µ)  
å…¶èŒè´£æ˜¯ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOM

```html
<a v-bind:[attributeName]="url"> ... </a>
```

> **è¿™é‡Œæœ‰å¾…æ‰©å±•ç ”ç©¶**

##### ä¿®é¥°ç¬¦

ä»¥åŠè§’å¥å· . æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®š

```html
<form v-on:submit.prevent="onSubmit">...</form>
```

##### ç¼©å†™

```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-bind:href="url">...</a>
<!-- ç¼©å†™ -->
<a :href="url">...</a>
```

```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-on:click="doSomething">...</a>
<!-- ç¼©å†™ -->
<a @click="doSomething">...</a>
```

##### è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨

 å¯¹äºä»»ä½•å¤æ‚é€»è¾‘ï¼Œä½ éƒ½åº”å½“ä½¿ç”¨**è®¡ç®—å±æ€§**

```html
<div id="example">
  <p>Original message: "{{ message }}"</p>
  <p>Computed reversed message: "{{ reversedMessage }}"</p>
</div>

<script>
var vm = new Vue({
  el: '#example',
  data: {
    message: 'Hello'
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
});
<script>
```

##### computed vs methods

é€šè¿‡åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ

```html
<p>Reversed message: "{{ reversedMessage() }}"</p>

<script>
// åœ¨ç»„ä»¶ä¸­
methods: {
  reversedMessage: function () {
    return this.message.split('').reverse().join('')
  }
}</script>
```

**è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„**
**Date.now() ä¸æ˜¯å“åº”å¼ä¾èµ–**

##### è®¡ç®—å±æ€§

```js
var vm = new Vue({
  el: '#demo',
  data: {
    firstName: 'Foo',
    lastName: 'Bar'
  },
  computed: {
    fullName: function () {
      return this.firstName + ' ' + this.lastName
    }
  }
})
```

ä¾¦å¬å™¨

```html
<div id="watch-example">
  <p>
    Ask a yes/no question:
    <input v-model="question">
  </p>
  <p>{{ answer }}</p>
</div>

<!-- å› ä¸º AJAX åº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œï¼ŒVue æ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ -->
<!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ -->
<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
<script>
var watchExampleVM = new Vue({
  el: '#watch-example',
  data: {
    question: '',
    answer: 'I cannot give you an answer until you ask a question!'
  },
  watch: {
    // å¦‚æœ `question` å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ
    question: function (newQuestion, oldQuestion) {
      this.answer = 'Waiting for you to stop typing...'
      this.debouncedGetAnswer()
    }
  },
  created: function () {
    // `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚
    // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡
    // AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº
    // `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ
    // è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce
    this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)
  },
  methods: {
    getAnswer: function () {
      if (this.question.indexOf('?') === -1) {
        this.answer = 'Questions usually contain a question mark. ;-)'
        return
      }
      this.answer = 'Thinking...'
      var vm = this
      axios.get('https://yesno.wtf/api')
        .then(function (response) {
          vm.answer = _.capitalize(response.data.answer)
        })
        .catch(function (error) {
          vm.answer = 'Error! Could not reach the API. ' + error
        })
    }
  }
})
</script>
```

é™¤äº† `watch` é€‰é¡¹ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤å¼çš„ [vm.$watch API](https://cn.vuejs.org/v2/api/#vm-watch)ã€‚

#### Class ä¸ Style ç»‘å®š

##### ç»‘å®š HTML Class

ä¼ ç»™ v-bind:class ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠ¨æ€åœ°åˆ‡æ¢ class

```html
<div v-bind:class="{ active: isActive }"></div>
```

active è¿™ä¸ª class å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ®å±æ€§ isActive çš„ truthinessã€‚  
å¤šå€¼å¦‚ä¸‹:

```html
<div
  class="static"
  v-bind:class="{ active: isActive, 'text-danger': hasError }"
></div>
```

**ä»¥å¯¹è±¡å½¢å¼:**

```html
<div v-bind:class="classObject"></div>
data: {
  classObject: {
    active: true,
    'text-danger': false
  }
}
```

**æ•°ç»„è¯­æ³•**

```html
<div v-bind:class="[activeClass, errorClass]"></div>
data: {
  activeClass: 'active',
  errorClass: 'text-danger'
}
```

**ç”¨åœ¨ç»„ä»¶ä¸Š**

```html
<my-component v-bind:class="{ active: isActive }"></my-component>
```

#### ç»‘å®šå†…è”æ ·å¼

###### v-bind:style

ä¼ é€’ä¸€ä¸ª JavaScript å¯¹è±¡ã€‚  
CSS å±æ€§åå¯ä»¥ç”¨é©¼å³°å¼æˆ–çŸ­æ¨ªçº¿åˆ†éš” (kebab-caseï¼Œè®°å¾—ç”¨å¼•å·æ‹¬èµ·æ¥) æ¥å‘½å

```html
<div v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }"></div>
//æˆ–ç›´æ¥ç»‘å®šä¸€ä¸ªå¯¹è±¡
<div v-bind:style="styleObject"></div>
//æ•°ç»„è¯­æ³•
<div v-bind:style="[baseStyles, overridingStyles]"></div>
```

#### æ¡ä»¶æ¸²æŸ“

**v-if**

```html
<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
```

åœ¨ `<template>` å…ƒç´ ä¸Šä½¿ç”¨ `v-if` æ¡ä»¶æ¸²æŸ“åˆ†ç»„

```html
<template v-if="ok">
  <h1>Title</h1>
  <p>Paragraph 1</p>
  <p>Paragraph 2</p>
</template>
```

**v-else**

ä½ å¯ä»¥ä½¿ç”¨ v-else æŒ‡ä»¤æ¥è¡¨ç¤º v-if çš„â€œelse å—â€ï¼š

```html
<div v-if="Math.random() > 0.5">
  Now you see me
</div>
<div v-else>
  Now you don't
</div>
```

**v-else-if**

```html
<div v-if="type === 'A'">
  A
</div>
<div v-else-if="type === 'B'">
  B
</div>
<div v-else-if="type === 'C'">
  C
</div>
<div v-else>
  Not A/B/C
</div>
```

ç”¨ **key** ç®¡ç†å¯å¤ç”¨çš„å…ƒç´ 

Vue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ï¼Œé€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“.  
å› æ­¤Vue åŒæ—¶ä¸ºä½ æä¾›äº†ä¸€ç§æ–¹å¼æ¥è¡¨è¾¾â€œè¿™ä¸¤ä¸ªå…ƒç´ æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œä¸è¦å¤ç”¨å®ƒä»¬â€ã€‚  
åªéœ€æ·»åŠ ä¸€ä¸ªå…·æœ‰å”¯ä¸€å€¼çš„ key å±æ€§.

```html
<template v-if="loginType === 'username'">
  <label>Username</label>
  <input placeholder="Enter your username" key="username-input">
</template>
<template v-else>
  <label>Email</label>
  <input placeholder="Enter your email address" key="email-input">
</template>
```

æ³¨ï¼Œ `label`å…ƒç´ ä»ç„¶ä¼šè¢«é«˜æ•ˆåœ°å¤ç”¨ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰æ·»åŠ  key å±æ€§

##### v-show
å¦ä¸€ä¸ªç”¨äºæ ¹æ®æ¡ä»¶å±•ç¤ºå…ƒç´ çš„é€‰é¡¹æ˜¯ v-show æŒ‡ä»¤

```html
<h1 v-show="ok">Hello!</h1>
```

**ä¸åŒçš„æ˜¯å¸¦æœ‰ v-show çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨DOMä¸­**   
`v-show` ä¸æ”¯æŒ `<template>` å…ƒç´ ï¼Œä¹Ÿä¸æ”¯æŒ `v-else` 

ä¸€èˆ¬æ¥è¯´ï¼Œv-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚  
å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ v-show è¾ƒå¥½ï¼›  
å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ v-if è¾ƒå¥½.

##### v-if ä¸ v-for ä¸€èµ·ä½¿ç”¨

ä¸æ¨èåŒæ—¶ä½¿ç”¨ v-if å’Œ v-for.  
å½“ `v-if` ä¸ `v-for` ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ`v-for` å…·æœ‰æ¯” `v-if` æ›´é«˜çš„ä¼˜å…ˆçº§

#### åˆ—è¡¨æ¸²æŸ“

åœ¨ v-for å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„å±æ€§

```html
<ul id="example-1">
  <li v-for="(item, index) in items">
    {{ parentMessage }} - {{ index }} - {{ item.message }}
  </li>
</ul>
 data: {
    items: [
      { message: 'Foo' },
      { message: 'Bar' }
    ]
  }
//ä¹Ÿå¯ä»¥ç”¨ of æ›¿ä»£ in ä½œä¸ºåˆ†éš”ç¬¦
<div v-for="item of items"></div>
```

##### åœ¨ v-for é‡Œä½¿ç”¨å¯¹è±¡

```html
<div :key="index" v-for="(value, name, index) in object">
  {{ index }}. {{ name }}: {{ value }}
</div>
```
**åœ¨éå†å¯¹è±¡æ—¶ï¼Œä¼šæŒ‰ Object.keys() çš„ç»“æœéå†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒçš„ç»“æœåœ¨ä¸åŒçš„ JavaScript å¼•æ“ä¸‹éƒ½ä¸€è‡´**

#### æ•°ç»„æ›´æ–°æ£€æµ‹

##### å˜å¼‚æ–¹æ³• (mutation method)

Vue å°†è¢«ä¾¦å¬çš„æ•°ç»„çš„å˜å¼‚æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°

- push()
- pop()
- shift()
- unshift()
- splice()
- sort()
- reverse()

æ›¿æ¢æ•°ç»„

å˜å¼‚æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œä¼šæ”¹å˜è°ƒç”¨äº†è¿™äº›æ–¹æ³•çš„åŸå§‹æ•°ç»„ã€‚  
ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹Ÿæœ‰éå˜å¼‚ (non-mutating method) æ–¹æ³•ï¼Œä¾‹å¦‚

- filter()
- concat()
- slice()

å®ƒä»¬ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼Œè€Œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„.

```js
example1.items = example1.items.filter(function (item) {
  return item.message.match(/Foo/)
});
```

##### æ³¨æ„äº‹é¡¹

ç”±äº JavaScript çš„é™åˆ¶ï¼ŒVue ä¸èƒ½æ£€æµ‹ä»¥ä¸‹æ•°ç»„çš„å˜åŠ¨ï¼š

1. å½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶ï¼Œä¾‹å¦‚ï¼š`vm.items[indexOfItem] = newValue`
2. å½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼š`vm.items.length = newLength`

```js
var vm = new Vue({
  data: {
    items: ['a', 'b', 'c']
  }
})
vm.items[1] = 'x' // ä¸æ˜¯å“åº”æ€§çš„
vm.items.length = 2 // ä¸æ˜¯å“åº”æ€§çš„
```

**è§£å†³ç¬¬ä¸€ç±»é—®é¢˜**

```js
// Vue.set
Vue.set(vm.items, indexOfItem, newValue)
//æˆ–
// Array.prototype.splice
vm.items.splice(indexOfItem, 1, newValue)
//æˆ–
vm.$set(vm.items, indexOfItem, newValue)
```

**è§£å†³ç¬¬äºŒç±»é—®é¢˜**

```html
vm.items.splice(newLength)
```

##### å¯¹è±¡å˜æ›´æ£€æµ‹æ³¨æ„äº‹é¡¹

Vue ä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤

```js
var vm = new Vue({
  data: {
    a: 1
  }
})
// `vm.a` ç°åœ¨æ˜¯å“åº”å¼çš„
vm.b = 2
// `vm.b` ä¸æ˜¯å“åº”å¼çš„
```

å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼ŒVue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚  
ä½†å¯ä½¿ç”¨ Vue.set(object, propertyName, value) æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§.

```js
var vm = new Vue({
  data: {
    userProfile: {
      name: 'Anika'
    }
  }
});
Vue.set(vm.userProfile, 'age', 27);
```

æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§, åº”è¯¥è¿™æ ·åšï¼š

```js
vm.userProfile = Object.assign({}, vm.userProfile, {
  age: 27,
  favoriteColor: 'Vue Green'
});
```

åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-for

```html
<div id="todo-list-example">
  <form v-on:submit.prevent="addNewTodo">
    <label for="new-todo">Add a todo</label>
    <input
      v-model="newTodoText"
      id="new-todo"
      placeholder="E.g. Feed the cat"
    >
    <button>Add</button>
  </form>
  <ul>
    <li
      is="todo-item"
      v-for="(todo, index) in todos"
      v-bind:key="todo.id"
      v-bind:title="todo.title"
      v-on:remove="todos.splice(index, 1)"
    ></li>
  </ul>
</div>

<script>
//
Vue.component('todo-item', {
  template: '\
    <li>\
      {{ title }}\
      <button v-on:click="$emit(\'remove\')">Remove</button>\
    </li>\
  ',
  props: ['title']
})
new Vue({
  el: '#todo-list-example',
  data: {
    newTodoText: '',
    todos: [
      {
        id: 1,
        title: 'Do the dishes',
      },
      {
        id: 2,
        title: 'Take out the trash',
      },
      {
        id: 3,
        title: 'Mow the lawn'
      }
    ],
    nextTodoId: 4
  },
  methods: {
    addNewTodo: function () {
      this.todos.push({
        id: this.nextTodoId++,
        title: this.newTodoText
      })
      this.newTodoText = ''
    }
  }
})
</script>
```

æ³¨æ„è¿™é‡Œçš„ is=â€todo-itemâ€ å±æ€§ã€‚è¿™ç§åšæ³•åœ¨ä½¿ç”¨ DOM æ¨¡æ¿æ—¶æ˜¯ååˆ†å¿…è¦çš„ï¼Œå› ä¸ºåœ¨ &lt;ul&gt; å…ƒç´ å†…åªæœ‰ &lt;li&gt; å…ƒç´ ä¼šè¢«çœ‹ä½œæœ‰æ•ˆå†…å®¹ã€‚  
è¿™æ ·åšå®ç°çš„æ•ˆæœä¸ &lt;todo-item&gt; ç›¸åŒï¼Œä½†æ˜¯å¯ä»¥é¿å¼€ä¸€äº›æ½œåœ¨çš„æµè§ˆå™¨è§£æé”™è¯¯

##### äº‹ä»¶å¤„ç†

```html
<div id="example-1">
  <button v-on:click="counter += 1">Add 1</button>
  <p>The button above has been clicked {{ counter }} times.</p>
</div>

<script>
var example1 = new Vue({
  el: '#example-1',
  data: {
    counter: 0
  }
});
</script>
```

##### äº‹ä»¶å¤„ç†æ–¹æ³•

v-on è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªéœ€è¦è°ƒç”¨çš„æ–¹æ³•åç§°

```html
<div id="example-2">
  <!-- `greet` æ˜¯åœ¨ä¸‹é¢å®šä¹‰çš„æ–¹æ³•å -->
  <button v-on:click="greet">Greet</button>
</div>

<script>
var example2 = new Vue({
  el: '#example-2',
  data: {
    name: 'Vue.js'
  },
  // åœ¨ `methods` å¯¹è±¡ä¸­å®šä¹‰æ–¹æ³•
  methods: {
    greet: function (event) {
      // `this` åœ¨æ–¹æ³•é‡ŒæŒ‡å‘å½“å‰ Vue å®ä¾‹
      alert('Hello ' + this.name + '!')
      // `event` æ˜¯åŸç”Ÿ DOM äº‹ä»¶
      if (event) {
        alert(event.target.tagName)
      }
    }
  }
})
// ä¹Ÿå¯ä»¥ç”¨ JavaScript ç›´æ¥è°ƒç”¨æ–¹æ³•
example2.greet() // => 'Hello Vue.js!'
</script>
```

##### å†…è”å¤„ç†å™¨ä¸­çš„æ–¹æ³•

å†…è” JavaScript è¯­å¥ä¸­è°ƒç”¨æ–¹æ³•

```html
<div id="example-3">
  <button v-on:click="say('hi')">Say hi</button>
  <button v-on:click="say('what')">Say what</button>
</div>

<script>
new Vue({
  el: '#example-3',
  methods: {
    say: function (message) {
      alert(message)
    }
  }
})
</script>
```

å†…è”è¯­å¥å¤„ç†å™¨ä¸­è®¿é—®åŸå§‹çš„ DOM äº‹ä»¶, ç”¨ç‰¹æ®Šå˜é‡ `$event` æŠŠå®ƒä¼ å…¥æ–¹æ³•

```html
<button v-on:click="warn('Form cannot be submitted yet.', $event)">
  Submit
</button>

<script>
methods: {
  warn: function (message, event) {
    // ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡
    if (event) {
      event.preventDefault()
    }
    alert(message)
  }
}
</script>
```

#### äº‹ä»¶ä¿®é¥°ç¬¦

- .stop é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­
- .prevent æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢
- .capture
- .self
- .once ç‚¹å‡»äº‹ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡
- .passive

```html
<!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ -->
<a v-on:click.stop="doThis"></a>
<!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ -->
<form v-on:submit.prevent="onSubmit"></form>
<!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” -->
<a v-on:click.stop.prevent="doThat"></a>
<!-- åªæœ‰ä¿®é¥°ç¬¦ -->
<form v-on:submit.prevent></form>
<!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ -->
<!-- å³å†…éƒ¨å…ƒç´ è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç† -->
<div v-on:click.capture="doThis">...</div>
<!-- åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•° -->
<!-- å³äº‹ä»¶ä¸æ˜¯ä»å†…éƒ¨å…ƒç´ è§¦å‘çš„ -->
<div v-on:click.self="doThat">...</div>
```

ä¸ºäº†åœ¨å¿…è¦çš„æƒ…å†µä¸‹æ”¯æŒæ—§æµè§ˆå™¨ï¼ŒVue æä¾›äº†ç»å¤§å¤šæ•°å¸¸ç”¨çš„æŒ‰é”®ç çš„åˆ«åï¼š

- .enter
- .tab
- .delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)
- .esc
- .space
- .up
- .down
- .left
- .right

```html
<input v-on:keyup.13="submit">
```

å¦‚ä¸‹ä¿®é¥°ç¬¦æ¥å®ç°ä»…åœ¨æŒ‰ä¸‹ç›¸åº”æŒ‰é”®æ—¶æ‰è§¦å‘é¼ æ ‡æˆ–é”®ç›˜äº‹ä»¶çš„ç›‘å¬å™¨

- .ctrl
- .alt
- .shift
- .meta

.exact ä¿®é¥°ç¬¦

```html
<!-- å³ä½¿ Alt æˆ– Shift è¢«ä¸€åŒæŒ‰ä¸‹æ—¶ä¹Ÿä¼šè§¦å‘ -->
<button @click.ctrl="onClick">A</button>
<!-- æœ‰ä¸”åªæœ‰ Ctrl è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ -->
<button @click.ctrl.exact="onCtrlClick">A</button>
<!-- æ²¡æœ‰ä»»ä½•ç³»ç»Ÿä¿®é¥°ç¬¦è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ -->
<button @click.exact="onClick">A</button>
```

é™åˆ¶å¤„ç†å‡½æ•°ä»…å“åº”ç‰¹å®šçš„é¼ æ ‡æŒ‰é’®

- .left
- .right
- .middle

- - - - - -

#### è¡¨å•è¾“å…¥ç»‘å®š

 `<strong>v-model</strong>` æŒ‡ä»¤åœ¨è¡¨å• `<input>`ã€`<textarea>` åŠ `<select>` å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘

> ä½ åº”è¯¥é€šè¿‡ JavaScript åœ¨ç»„ä»¶çš„ `data` é€‰é¡¹ä¸­å£°æ˜**åˆå§‹å€¼**ã€‚
> 
> <cite>`v-model` ä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„ `value`ã€`checked`ã€`selected` ç‰¹æ€§çš„åˆå§‹å€¼è€Œæ€»æ˜¯å°† Vue å®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æºã€‚ </cite>

```html
<div id="example-5">
  <select v-model="selected">
    <option disabled value="">è¯·é€‰æ‹©</option>
    <option>A</option>
    <option>B</option>
    <option>C</option>
  </select>
  <span>Selected: {{ selected }}</span>
</div>

<script>
new Vue({
  el: '...',
  data: {
    selected: ''
  }
});
</script>
```

å¦‚æœ v-model è¡¨è¾¾å¼çš„åˆå§‹å€¼æœªèƒ½åŒ¹é…ä»»ä½•é€‰é¡¹ï¼Œ å…ƒç´ å°†è¢«æ¸²æŸ“ä¸ºâ€œæœªé€‰ä¸­â€çŠ¶æ€ã€‚  
åœ¨ iOS ä¸­ï¼Œè¿™ä¼šä½¿ç”¨æˆ·æ— æ³•é€‰æ‹©ç¬¬ä¸€ä¸ªé€‰é¡¹ã€‚  
å› ä¸ºè¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒiOS ä¸ä¼šè§¦å‘ change äº‹ä»¶ã€‚  
å› æ­¤ï¼Œæ›´æ¨èåƒä¸Šé¢è¿™æ ·æä¾›ä¸€ä¸ªå€¼ä¸ºç©ºçš„ç¦ç”¨é€‰é¡¹ã€‚

.lazy

v-model åœ¨æ¯æ¬¡ input äº‹ä»¶è§¦å‘åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥ (é™¤äº†ä¸Šè¿°è¾“å…¥æ³•ç»„åˆæ–‡å­—æ—¶)ã€‚ä½ å¯ä»¥æ·»åŠ  lazy ä¿®é¥°ç¬¦ï¼Œä»è€Œè½¬å˜**ä¸ºä½¿ç”¨ change äº‹ä»¶è¿›è¡ŒåŒæ­¥**

```html
<!-- åœ¨â€œchangeâ€æ—¶è€Œéâ€œinputâ€æ—¶æ›´æ–° -->
<input v-model.lazy="msg" >
```

**.number**  
å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ï¼Œå¯ä»¥ç»™ `v-model` æ·»åŠ  `number` ä¿®é¥°ç¬¦ï¼š

```html
<input v-model.number="age" type="number">
```

##### `.trim`

å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥ç»™ `v-model` æ·»åŠ  `trim` ä¿®é¥°ç¬¦ï¼š

```html
<input v-model.trim="msg">
```

### ç»„ä»¶

```html
<script>
// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶
Vue.component('button-counter', {
  data: function () {
    return {
      count: 0
    }
  },
  template: '<button v-on:click="count++">You clicked me {{ count }} times.</button>'
});
</script>

<div id="components-demo">
  <button-counter></button-counter>
</div>

<script>
new Vue({ el: '#components-demo' })
</script>
```

**ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ new Vue æ¥æ”¶ç›¸åŒçš„é€‰é¡¹**

#### ç»„ä»¶çš„å¤ç”¨

```markup
<div id="components-demo">
  <button-counter></button-counter>
  <button-counter></button-counter>
  <button-counter></button-counter>
</div>
```

æ¯ä¸ªç»„ä»¶éƒ½ä¼šå„è‡ªç‹¬ç«‹ç»´æŠ¤ã€‚  
æ¯ç”¨ä¸€æ¬¡ç»„ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªå®ƒçš„æ–°å®ä¾‹è¢«åˆ›å»ºã€‚

**data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°**

**ä¸€ä¸ªç»„ä»¶çš„ data é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼š**

*data: function () { return { count: 0 } }*

å¦‚æœ Vue æ²¡æœ‰è¿™æ¡è§„åˆ™ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±å¯èƒ½ä¼šå½±å“åˆ°å…¶å®ƒæ‰€æœ‰å®ä¾‹


###  ç»„ä»¶çš„æ³¨å†Œç±»å‹ï¼š**å…¨å±€æ³¨å†Œ**å’Œ**å±€éƒ¨æ³¨å†Œ** 
---

#### å…¨å±€æ³¨å†Œ
*Vue.component(â€˜my-component-nameâ€™, { // â€¦ options â€¦ })*

##### é€šè¿‡ Prop å‘å­ç»„ä»¶ä¼ é€’æ•°æ®

Prop æ˜¯ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸Šæ³¨å†Œçš„ä¸€äº›è‡ªå®šä¹‰ç‰¹æ€§ã€‚  
å½“ä¸€ä¸ªå€¼ä¼ é€’ç»™ä¸€ä¸ª prop ç‰¹æ€§çš„æ—¶å€™ï¼Œå®ƒå°±å˜æˆäº†é‚£ä¸ªç»„ä»¶å®ä¾‹çš„ä¸€ä¸ªå±æ€§ã€‚

```js
Vue.component('blog-post', {
  props: ['title'],
  template: '<h3>{{ title }}</h3>'
})
```

- å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„ prop
- ä»»ä½•å€¼éƒ½å¯ä»¥ä¼ é€’ç»™ä»»ä½• prop

```html
<blog-post title="My journey with Vue"></blog-post>
<blog-post title="Blogging with Vue"></blog-post>
<blog-post title="Why Vue is so fun"></blog-post>
```

ä¼ é€’æ•°ç»„

```html
<script>
new Vue({
  el: '#blog-post-demo',
  data: {
    posts: [
      { id: 1, title: 'My journey with Vue' },
      { id: 2, title: 'Blogging with Vue' },
      { id: 3, title: 'Why Vue is so fun' }
    ]
  }
});
</script>

<blog-post  v-for="post in posts"
            v-bind:key="post.id"
            v-bind:title="post.title">
</blog-post>
```

##### åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ v-model

è‡ªå®šä¹‰äº‹ä»¶ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºæ”¯æŒ v-model çš„è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶

```html
<input v-model="searchText">
//åŒä»·äº
<input
  v-bind:value="searchText"
  v-on:input="searchText = $event.target.value"
>
```

ç»„ä»¶é€šè¿‡è¿™æ ·

```js
Vue.component('custom-input', {
  props: ['value'],
  template: `
    <input
      v-bind:value="value"
      v-on:input="$emit('input', $event.target.value)"
    >
  `
})
```

è¿™ä¸ªç»„ä»¶å†…çš„ å¿…é¡»ï¼š

å°†å…¶ value ç‰¹æ€§ç»‘å®šåˆ°ä¸€ä¸ªåå« value çš„ prop ä¸Š  
åœ¨å…¶ input äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°†æ–°çš„å€¼é€šè¿‡è‡ªå®šä¹‰çš„ input äº‹ä»¶æŠ›å‡º

```html
<custom-input
  v-bind:value="searchText"
  v-on:input="searchText = $event"
></custom-input>
//ç­‰ä»·äº
<custom-input v-model="searchText"></custom-input>
```

- - - - - -

#### é€šè¿‡æ’æ§½åˆ†å‘å†…å®¹

å’Œ HTML å…ƒç´ ä¸€æ ·ï¼Œå‘ä¸€ä¸ªç»„ä»¶ä¼ é€’å†…å®¹

```html
<alert-box>
  Something bad happened.
</alert-box>

<script>
Vue.component('alert-box', {
  template: `
    <div class="demo-alert-box">
      <strong>Error!</strong>
      <slot></slot>
    </div>
  `
})
</script>
```

#### åŠ¨æ€ç»„ä»¶

é€šè¿‡ Vue çš„ `<component>` å…ƒç´ åŠ ä¸€ä¸ªç‰¹æ®Šçš„ `is` ç‰¹æ€§æ¥å®ç°, åˆ›å»ºä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢.




æ•°æ®ç»‘å®š
æŒ‡ä»¤
è‡ªå®šä¹‰æŒ‡ä»¤
è®¡ç®—å±æ€§
è¡¨å•æ§ä»¶ç»‘å®š
è¿‡æ»¤å™¨
Classä¸Styleç»‘å®š
è¿‡æ¸¡
ç»‘å®šäº‹ä»¶
ç»„ä»¶
è¡¨å•æ ¡éªŒ
åˆ†ç»„æ ¡éªŒ
ä¸æœåŠ¡å™¨é€šä¿¡
RESTfulè°ƒç”¨
Stylusä½¿ç”¨
Vuex

