---
title: 'Skeleton Screens'
date: '2019-09-10T03:17:25+08:00'
status: publish
permalink: /skeleton-screens
category: ["css"] 
tag: ["css","skeleton screens","layout"]
author: "max"
excerpt: "åœ¨ç½‘ä¸Šè®¾è®¡åŠ è½½çŠ¶æ€ç»å¸¸è¢«å¿½è§†æˆ–è¢«è§†ä¸ºäº‹åçš„æƒ³æ³•ã€‚æ€§èƒ½ä¸ä»…ä»…æ˜¯å¼€å‘äººå‘˜çš„è´£ä»»ï¼Œå»ºç«‹ä¸€ä¸ªä¸æ…¢é€Ÿè¿æ¥ä¸€èµ·å·¥ä½œçš„ä½“éªŒä¹Ÿå¯èƒ½æ˜¯ä¸€é¡¹è®¾è®¡æŒ‘æˆ˜ã€‚
è™½ç„¶å¼€å‘äººå‘˜éœ€è¦å…³æ³¨ç¼©å°å’Œç¼“å­˜ç­‰é—®é¢˜ï¼Œä½†è®¾è®¡äººå‘˜å¿…é¡»è€ƒè™‘UIåœ¨å¤„äºâ€œåŠ è½½â€æˆ–â€œç¦»çº¿â€çŠ¶æ€æ—¶çš„å¤–è§‚å’Œè¡Œä¸ºæ–¹å¼"
featured: false
image: ./p1.png
featuredimage:
  src: "p1.png"
  alt: ""
---

åœ¨ç½‘ä¸Šè®¾è®¡åŠ è½½çŠ¶æ€ç»å¸¸è¢«å¿½è§†æˆ–è¢«è§†ä¸ºäº‹åçš„æƒ³æ³•ã€‚æ€§èƒ½ä¸ä»…ä»…æ˜¯å¼€å‘äººå‘˜çš„è´£ä»»ï¼Œå»ºç«‹ä¸€ä¸ªä¸æ…¢é€Ÿè¿æ¥ä¸€èµ·å·¥ä½œçš„ä½“éªŒä¹Ÿå¯èƒ½æ˜¯ä¸€é¡¹è®¾è®¡æŒ‘æˆ˜ã€‚
è™½ç„¶å¼€å‘äººå‘˜éœ€è¦å…³æ³¨ç¼©å°å’Œç¼“å­˜ç­‰é—®é¢˜ï¼Œä½†è®¾è®¡äººå‘˜å¿…é¡»è€ƒè™‘UIåœ¨å¤„äºâ€œåŠ è½½â€æˆ–â€œç¦»çº¿â€çŠ¶æ€æ—¶çš„å¤–è§‚å’Œè¡Œä¸ºæ–¹å¼ã€‚

### ï¼ƒé€Ÿåº¦çš„é”™è§‰

éšç€æˆ‘ä»¬å¯¹ç§»åŠ¨ä½“éªŒçš„æœŸæœ›å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬å¯¹æ€§èƒ½çš„ç†è§£ä¹Ÿåœ¨å˜åŒ–ã€‚äººä»¬æœŸæœ›ç½‘ç»œåº”ç”¨ç¨‹åºæ„Ÿè§‰åƒæœ¬æœºåº”ç”¨ç¨‹åºä¸€æ ·å¿«é€Ÿå“åº”ï¼Œæ— è®ºå…¶å½“å‰çš„ç½‘ç»œè¦†ç›–èŒƒå›´å¦‚ä½•ã€‚

[æ„ŸçŸ¥æ€§èƒ½](https://en.wikipedia.org/wiki/Perceived_performance)è¡¡é‡æŸäº‹ç‰©å¯¹ç”¨æˆ·çš„**æ„Ÿå—**é€Ÿåº¦ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯ç”¨æˆ·æ›´è€å¿ƒï¼Œå¹¶ä¸”å¦‚æœä»–ä»¬çŸ¥é“æ­£åœ¨å‘ç”Ÿä»€ä¹ˆå¹¶ä¸”èƒ½å¤Ÿåœ¨å®é™…å­˜åœ¨ä¹‹å‰é¢„æµ‹å†…å®¹ï¼Œä»–ä»¬ä¼šè®¤ä¸ºç³»ç»Ÿæ›´å¿«ã€‚è¿™æ˜¯å…³äºç®¡ç†æœŸæœ›å’Œè®©ç”¨æˆ·äº†è§£æƒ…æŠ¥çš„é‡ç‚¹ã€‚

å¯¹äºWebåº”ç”¨ç¨‹åºï¼Œæ­¤æ¦‚å¿µå¯èƒ½åŒ…æ‹¬æ˜¾ç¤ºæ–‡æœ¬ï¼Œå›¾åƒæˆ–å…¶ä»–å†…å®¹å…ƒç´ çš„â€œæ¨¡å‹â€ â€“ ç§°ä¸º**éª¨æ¶å±å¹•** ğŸ’€ã€‚æ‚¨å¯ä»¥åœ¨Facebookï¼ŒGoogleï¼ŒSlackå’Œå…¶ä»–å…¬å¸ä½¿ç”¨çš„é‡å¤–å‘ç°è¿™äº›ï¼š

### ï¼ƒä¸€ä¸ªä¾‹å­

å‡è®¾æ‚¨æ­£åœ¨æ„å»ºä¸€ä¸ªWebåº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ä¸€ç§æ—…è¡Œå»ºè®®ç±»å‹çš„ä¸œè¥¿ï¼Œäººä»¬å¯ä»¥åˆ†äº«ä»–ä»¬çš„æ—…è¡Œå’Œæ¨èåœ°ç‚¹ï¼Œæ‰€ä»¥ä½ çš„ä¸»è¦å†…å®¹å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

![FaceBook](./p1.png)

![Linkin](./p2.png)

![Youtube](./p3.png)

æ¯å½“æœ‰äººä»æœåŠ¡å™¨è¯·æ±‚æ–°å†…å®¹æ—¶ï¼Œæ‚¨å¯ä»¥ç«‹å³å¼€å§‹æ˜¾ç¤ºéª¨æ¶ï¼ŒåŒæ—¶åœ¨åå°åŠ è½½æ•°æ®ã€‚å†…å®¹å‡†å¤‡å°±ç»ªåï¼Œåªéœ€å°†éª¨æ¶æ¢æˆå®é™…å¡å³å¯ã€‚è¿™å¯ä»¥ä½¿ç”¨æ™®é€šçš„JavaScriptæˆ–ä½¿ç”¨åƒReactè¿™æ ·çš„åº“æ¥å®Œæˆã€‚

ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨å›¾åƒæ¥æ˜¾ç¤ºéª¨æ¶ï¼Œä½†è¿™ä¼šå¼•å…¥é¢å¤–çš„è¯·æ±‚å’Œæ•°æ®å¼€é”€ã€‚æˆ‘ä»¬å·²ç»åœ¨è¿™é‡ŒåŠ è½½äº†ä¸œè¥¿ï¼Œæ‰€ä»¥ç­‰å¾…å¦ä¸€ä¸ªå›¾åƒé¦–å…ˆåŠ è½½å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚æ­¤å¤–ï¼Œå®ƒæ²¡æœ‰å“åº”ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šè°ƒæ•´ä¸€äº›å†…å®¹å¡çš„æ ·å¼ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸å¤åˆ¶éª¨æ¶å›¾åƒçš„æ›´æ”¹ï¼Œä»¥ä¾¿å®ƒä»¬å†æ¬¡åŒ¹é…ã€‚ğŸ˜’å—¯ã€‚

æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨CSSåˆ›å»ºæ•´ä¸ªäº‹ç‰©ã€‚æ²¡æœ‰é¢å¤–çš„è¯·æ±‚ï¼Œæœ€å°çš„å¼€é”€ï¼Œç”šè‡³æ²¡æœ‰ä»»ä½•é¢å¤–çš„æ ‡è®°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ„å»ºå®ƒï¼Œä»¥ä¾¿ä»¥åæ›´è½»æ¾åœ°æ›´æ”¹è®¾è®¡ã€‚

### ï¼ƒåœ¨CSSä¸­ç»˜åˆ¶éª·é«…

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç»˜åˆ¶æ„æˆå¡ç‰‡éª¨æ¶çš„åŸºæœ¬å½¢çŠ¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘å±æ€§æ·»åŠ ä¸åŒçš„æ¸å˜æ¥å®ç°æ­¤ç›®çš„`background-image`ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ€§æ¸å˜ä»ä¸Šåˆ°ä¸‹è¿è¡Œï¼Œå…·æœ‰ä¸åŒçš„é¢œè‰²åœæ­¢è¿‡æ¸¡ã€‚å¦‚æœæˆ‘ä»¬åªå®šä¹‰ä¸€ä¸ªé¢œè‰²åœæ­¢å¹¶ä½¿å…¶ä½™é¢œè‰²ä¿æŒé€æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶å½¢çŠ¶ã€‚

è¯·è®°ä½ï¼Œå¤šä¸ªèƒŒæ™¯å›¾åƒåœ¨æ­¤å¤„å †å åœ¨ä¸€èµ·ï¼Œå› æ­¤é¡ºåºéå¸¸é‡è¦ã€‚æœ€åä¸€ä¸ªæ¸å˜å®šä¹‰å°†åœ¨åé¢ï¼Œç¬¬ä¸€ä¸ªå®šä¹‰åœ¨å‰é¢ã€‚

```css
.skeleton {
  background-repeat: no-repeat;
  background-image:
    /* layer 2: avatar */
    /* white circle with 16px radius */
    radial-gradient(circle 16px, white 99%, transparent 0),
    /* layer 1: title */
    /* white rectangle with 40px height */
    linear-gradient(white 40px, transparent 0),
    /* layer 0: card bg */
    /* gray rectangle that covers whole element */
    linear-gradient(gray 100%, transparent 0);
}
```

è¿™äº›å½¢çŠ¶å¯ä»¥ä¼¸å±•ä»¥å¡«å……æ•´ä¸ªç©ºé—´ï¼Œå°±åƒå¸¸è§„çš„å—çº§å…ƒç´ ä¸€æ ·ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦æ”¹å˜å®ƒï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå®ƒä»¬å®šä¹‰æ˜¾å¼ç»´åº¦ã€‚å€¼å¯¹`background-size`è®¾ç½®æ¯ä¸ªå›¾å±‚çš„å®½åº¦å’Œé«˜åº¦ï¼Œä¿æŒæˆ‘ä»¬ä½¿ç”¨çš„ç›¸åŒé¡ºåº`background-image`ï¼š

```css
.skeleton {
  background-size:
    32px 32px,  /* avatar */
    200px 40px, /* title */
    100% 100%;  /* card bg */
}
```

æœ€åä¸€æ­¥æ˜¯å°†å…ƒç´ æ”¾åœ¨å¡ä¸Šã€‚è¿™å°±åƒ`position:absolute`ï¼Œè¡¨ç¤º`left`å’Œ`top`å±æ€§çš„å€¼ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå¤´åƒå’Œæ ‡é¢˜æ¨¡æ‹Ÿ24pxçš„å¡«å……ï¼Œä»¥åŒ¹é…çœŸå®å†…å®¹å¡çš„å¤–è§‚ã€‚

```css
.skeleton {
  background-position:
    24px 24px,  /* avatar */
    24px 200px, /* title */
    0 0;        /* card bg */
}
```

### ï¼ƒä½¿ç”¨è‡ªå®šä¹‰å±æ€§å°†å…¶åˆ†è§£

è¿™åœ¨ä¸€ä¸ªç®€å•çš„ä¾‹å­ä¸­æ•ˆæœå¾ˆå¥½ â€“ ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦æ„å»ºä¸€äº›æ›´å¤æ‚çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆCSSä¼šå¾ˆå¿«å˜å¾—æ··ä¹±å¹¶ä¸”å¾ˆéš¾é˜…è¯»ã€‚å¦‚æœå¦ä¸€ä½å¼€å‘äººå‘˜æäº¤äº†è¯¥ä»£ç ï¼Œä»–ä»¬å°±ä¸çŸ¥é“æ‰€æœ‰è¿™äº›é­”æœ¯æ•°å­—æ¥è‡ªå“ªé‡Œã€‚ä¿æŒå®ƒè‚¯å®šä¼šå¾ˆç³Ÿç³•ã€‚

å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨[è‡ªå®šä¹‰CSSå±æ€§](https://www.smashingmagazine.com/2017/04/start-using-css-custom-properties/)ä»¥æ›´åŠ ç®€æ´ï¼Œå¼€å‘äººå‘˜å‹å¥½çš„æ–¹å¼ç¼–å†™éª¨æ¶æ ·å¼ â€“ ç”šè‡³å¯ä»¥è€ƒè™‘ä¸åŒå€¼ä¹‹é—´çš„å…³ç³»ï¼š

```css
.skeleton {
  /*
    define as separate properties
  */
  --card-height: 340px;
  --card-padding:24px;
  --card-skeleton: linear-gradient(gray var(--card-height), transparent 0);
  --title-height: 32px;
  --title-width: 200px;
  --title-position: var(--card-padding) 180px;
  --title-skeleton: linear-gradient(white var(--title-height), transparent 0);
  --avatar-size: 32px;
  --avatar-position: var(--card-padding) var(--card-padding);
  --avatar-skeleton: radial-gradient(
    circle calc(var(--avatar-size) / 2),
    white 99%,
    transparent 0
  );
  /*
    now we can break the background up
    into individual shapes
  */
  background-image:
    var(--avatar-skeleton),
    var(--title-skeleton),
    var(--card-skeleton);
  background-size:
    var(--avatar-size),
    var(--title-width) var(--title-height),
    100% 100%;
  background-position:
    var(--avatar-position),
    var(--title-position),
    0 0;
}
```

è¿™ä¸ä»…æ›´å…·å¯è¯»æ€§ï¼Œè€Œä¸”ä»¥åæ›´å®¹æ˜“æ›´æ”¹æŸäº›å€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å˜é‡ï¼ˆæƒ³`--avatar-size`ï¼Œ`--card-padding`ç­‰ï¼‰æ¥å®šä¹‰æ ·å¼çš„å®é™…å¡å§‹ç»ˆä¸é•‚ç©ºç‰ˆæœ¬ä¿æŒåŒæ­¥ã€‚

ç°åœ¨æ·»åŠ åª’ä½“æŸ¥è¯¢ä»¥è°ƒæ•´ä¸åŒæ–­ç‚¹å¤„çš„éª¨æ¶éƒ¨åˆ†ä¹Ÿéå¸¸ç®€å•ï¼š

```css
@media screen and (min-width: 47em) {
  :root {
    --card-padding: 32px;
    --card-height: 360px;
  }
}
```

[æµè§ˆå™¨](http://caniuse.com/#feat=css-variables)å¯¹è‡ªå®šä¹‰å±æ€§çš„[æ”¯æŒ](http://caniuse.com/#feat=css-variables)å¾ˆå¥½ï¼Œä½†ä¸æ˜¯100ï¼…ã€‚åŸºæœ¬ä¸Šï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æœ‰æ”¯æŒï¼ŒIE / Edgeæœ‰ç‚¹æ™šäº†ã€‚å¯¹äºæ­¤ç‰¹å®šç”¨ä¾‹ï¼Œä½¿ç”¨Sasså˜é‡æ·»åŠ å›é€€å¾ˆå®¹æ˜“ã€‚

### ï¼ƒæ·»åŠ åŠ¨ç”»

ä¸ºäº†ä½¿è¿™æ›´å¥½ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„éª¨éª¼è®¾ç½®åŠ¨ç”»ï¼Œä½¿å…¶çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨é¡¶å±‚æ”¾ç½®ä¸€ä¸ªæ–°çš„æ¸å˜ï¼Œç„¶åç”¨å®ƒæ¥è®¾ç½®å…¶ä½ç½®çš„åŠ¨ç”»`@keyframes`ã€‚

ä»¥ä¸‹æ˜¯æˆå“éª¨æ¶å¡å¤–è§‚çš„å®Œæ•´ç¤ºä¾‹ï¼š

```html
<div class="card"></div>
```

```css
/*
 * Variables
 */
:root {
  --card-padding: 24px;
  --card-height: 340px;
  --card-skeleton: linear-gradient(lightgrey var(--card-height), transparent 0);
  --avatar-size: 32px;
  --avatar-position: var(--card-padding) var(--card-padding);
  --avatar-skeleton: radial-gradient(circle 16px at center, white 99%, transparent 0
  );
  --title-height: 32px;
  --title-width: 200px;
  --title-position: var(--card-padding) 180px;
  --title-skeleton: linear-gradient(white var(--title-height), transparent 0);
  --desc-line-height: 16px;
  --desc-line-skeleton: linear-gradient(white var(--desc-line-height), transparent 0);
  --desc-line-1-width:230px;
  --desc-line-1-position: var(--card-padding) 242px;
  --desc-line-2-width:180px;
  --desc-line-2-position: var(--card-padding) 265px;
  --footer-height: 40px;
  --footer-position: 0 calc(var(--card-height) - var(--footer-height));
  --footer-skeleton: linear-gradient(white var(--footer-height), transparent 0);
  --blur-width: 200px;
  --blur-size: var(--blur-width) calc(var(--card-height) - var(--footer-height));
}
/*
 * Card Skeleton for Loading
 */
.card {
  width: 280px; //demo
  height: var(--card-height);
  &:empty::after {
    content:"";
    display:block;
    width: 100%;
    height: 100%;
    border-radius:6px;
    box-shadow: 0 10px 45px rgba(0,0,0, .1);
    background-image:
      linear-gradient(
        90deg,
        rgba(lightgrey, 0) 0,
        rgba(lightgrey, .8) 50%,
        rgba(lightgrey, 0) 100%
      ),                          //animation blur
      var(--title-skeleton),      //title
      var(--desc-line-skeleton),  //desc1
      var(--desc-line-skeleton),  //desc2
      var(--avatar-skeleton),     //avatar
      var(--footer-skeleton),     //footer bar
      var(--card-skeleton)        //card
    ;
    background-size:
      var(--blur-size),
      var(--title-width) var(--title-height),
      var(--desc-line-1-width) var(--desc-line-height),
      var(--desc-line-2-width) var(--desc-line-height),
      var(--avatar-size) var(--avatar-size),
      100% var(--footer-height),
      100% 100%
    ;
    background-position:
      -150% 0,                      //animation
      var(--title-position),        //title
      var(--desc-line-1-position),  //desc1
      var(--desc-line-2-position),  //desc2
      var(--avatar-position),       //avatar
      var(--footer-position),       //footer bar
      0 0                           //card
    ;
    background-repeat: no-repeat;
    animation: loading 1.5s infinite;
  }
}
@keyframes loading {
  to {
    background-position:
      350% 0,
      var(--title-position),
      var(--desc-line-1-position),
      var(--desc-line-2-position),
      var(--avatar-position),
      var(--footer-position),
      0 0
    ;
  }
}
/*
 * Demo Stuff
 */
body {
  min-height:100vh;
  background-color:#FFF;
  display:flex;
  justify-content:center;
  align-items:center;
}
```